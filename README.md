# Micronaut CRUD Application

A Micronaut-based CRUD application built with Clean Architecture principles, Gradle, Java 17, and PostgreSQL.

## Project Structure

This project follows Clean Architecture with clear separation of concerns:

```
src/main/java/com/micronaut/crud/
├── domain/                     # Domain Layer (Business Logic)
│   ├── entity/                 # Domain entities
│   │   ├── BaseEntity.java     # Base entity with common fields
│   │   └── User.java           # User entity
│   └── repository/             # Repository interfaces
│       └── UserRepository.java # User repository
│
├── application/                # Application Layer (Use Cases)
│   ├── dto/                    # Data Transfer Objects
│   │   ├── CreateUserRequest.java
│   │   └── UserDTO.java
│   └── usecase/                # Business use cases
│       └── UserUseCase.java    # User business logic
│
├── infrastructure/             # Infrastructure Layer (Technical Details)
│   ├── mapper/                 # Entity-DTO mappers
│   │   └── UserMapper.java
│   └── persistence/            # Database implementations (auto-generated by Micronaut Data)
│
└── presentation/               # Presentation Layer (API Controllers)
    └── controller/
        └── UserController.java # REST API endpoints
```

## Technologies

- **Framework**: Micronaut 4.10.7
- **Build Tool**: Gradle
- **Java Version**: 17
- **Database**: PostgreSQL
- **ORM**: Micronaut Data JPA (Hibernate)
- **Testing**: JUnit 5
- **Validation**: Jakarta Bean Validation (annotation-api)

## Features

- ✅ Clean Architecture structure
- ✅ RESTful API with CRUD operations
- ✅ PostgreSQL database integration
- ✅ JPA/Hibernate ORM
- ✅ Request/Response DTOs
- ✅ Bean validation
- ✅ Automated timestamp management
- ✅ JUnit 5 testing support

## Prerequisites

- Java 17 or higher
- PostgreSQL database
- Gradle (wrapper included)

## Database Setup

1. Create a PostgreSQL database:
```sql
CREATE DATABASE crudapp_db;
```

2. Update database credentials in `src/main/resources/application.properties`:
```properties
datasources.default.url=jdbc:postgresql://localhost:5432/crudapp_db
datasources.default.username=postgres
datasources.default.password=your_password
```

## Running the Application

```bash
# Build the project
./gradlew build

# Run the application
./gradlew run
```

The application will start on `http://localhost:8080`

## API Endpoints

### User Management

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/users` | Create a new user |
| GET | `/api/users` | Get all users |
| GET | `/api/users/{id}` | Get user by ID |
| GET | `/api/users/username/{username}` | Get user by username |
| PUT | `/api/users/{id}` | Update user |
| DELETE | `/api/users/{id}` | Delete user |

### Example Request

**Create User:**
```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "johndoe",
    "email": "john@example.com",
    "password": "password123",
    "firstName": "John",
    "lastName": "Doe"
  }'
```

## Testing

Run tests with:
```bash
./gradlew test
```

## Clean Architecture Layers

### 1. Domain Layer
- **Entities**: Core business objects (`User`, `BaseEntity`)
- **Repositories**: Interfaces defining data access contracts
- **Independence**: No dependencies on outer layers

### 2. Application Layer
- **DTOs**: Data transfer objects for API communication
- **Use Cases**: Business logic and orchestration (`UserUseCase`)
- **Depends on**: Domain layer only

### 3. Infrastructure Layer
- **Mappers**: Convert between entities and DTOs
- **Implementations**: Database implementations (auto-generated)
- **Depends on**: Domain and Application layers

### 4. Presentation Layer
- **Controllers**: REST API endpoints
- **HTTP Handling**: Request/response management
- **Depends on**: Application layer (via Use Cases)

## Development

### Adding New Entities

1. Create entity in `domain/entity/`
2. Create repository interface in `domain/repository/`
3. Create DTOs in `application/dto/`
4. Create use case in `application/usecase/`
5. Create mapper in `infrastructure/mapper/`
6. Create controller in `presentation/controller/`

### Dependencies

All dependencies are managed in `build.gradle`:
- Micronaut Data JPA
- PostgreSQL driver
- Jakarta Annotation API
- Micronaut Serialization (Jackson)
- HikariCP connection pooling

## License

This project is open source and available under the MIT License.
